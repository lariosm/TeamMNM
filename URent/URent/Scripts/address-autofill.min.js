var placeSearch, autocomplete, componentForm = { locality: "long_name", administrative_area_level_1: "long_name", postal_code: "short_name" }; function initAutocomplete() { (autocomplete = new google.maps.places.Autocomplete(document.getElementById("autocomplete"), { types: ["geocode"] })).setFields(["address_component"]), autocomplete.addListener("place_changed", fillInAddress) } function fillInAddress() { var e = autocomplete.getPlace(); for (var o in codeAddress(), componentForm) document.getElementById(o).value = ""; for (var t = 0; t < e.address_components.length; t++) { var n = e.address_components[t].types[0]; if (componentForm[n]) { var a = e.address_components[t][componentForm[n]]; document.getElementById(n).value = a } } document.getElementById("address").value = e.address_components[0].long_name + " " + e.address_components[1].short_name } function geolocate() { navigator.geolocation && navigator.geolocation.getCurrentPosition(function (e) { var o = { lat: e.coords.latitude, lng: e.coords.longitude }, t = new google.maps.Circle({ center: o, radius: e.coords.accuracy }); autocomplete.setBounds(t.getBounds()) }) } function codeAddress() { geocoder = new google.maps.Geocoder; var e = document.getElementById("autocomplete").value; geocoder.geocode({ address: e }, function (e, o) { o == google.maps.GeocoderStatus.OK ? (document.getElementById("lat").value = e[0].geometry.location.lat(), document.getElementById("lng").value = e[0].geometry.location.lng(), console.log("Latitude: " + e[0].geometry.location.lat()), console.log("Longitude: " + e[0].geometry.location.lng())) : alert("Geocode was not successful for the following reason: " + o) }) }