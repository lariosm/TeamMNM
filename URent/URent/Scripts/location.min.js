function locateRequest() { $.ajax({ type: "GET", dataType: "json", url: "/Resources/CurrentLocation/", success: setLocation, error: ajaxError }) } function setLocation(e) { var o = e.latitude, a = e.longitude, n = e.city, r = e.subdivision, t = e.postal_code; $("#currentloc").remove(), $("#location").append('<a class="nav-link" id="currentloc" href="#"><i class="fa fa-map-marker"></i> ' + n + ", " + r + " " + t + "</a>"), $("#geoCoordinate").prepend('<input name = "lng" value = "' + a + '" hidden />'), $("#geoCoordinate").prepend('<input name = "lat" value = "' + o + '" hidden />') } function ajaxError() { console.error("ERROR: Unable to resolve location") } $(document).ready(locateRequest);